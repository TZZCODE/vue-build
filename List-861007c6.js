import{d as F,i as J,h as g,j as K,k as O,o as Q,g as W,f as _,a as o,w as a,u as d,q as X,s as y,E as B,t as f,r as i,v as Y,b as m,x as Z,y as D,z as ee,_ as te}from"./index-bbfac4a2.js";import{c as w}from"./config-efaa5831.js";import{u as oe,P}from"./productList-b16de5ed.js";const le={class:"header"},ae={class:"form"},ne={class:"group"},se={class:"content"},ie={class:"footer"},ce=F({__name:"List",setup(re){const x=oe(),n=J({user:"",date:""});let c=g(1),h=g(0),C=g(!1),k=g([]);const u=g([]),z=Y(),v=(e,t="")=>{y.get(w.listData,{page:c.value,search:encodeURI(t)}).then(r=>{console.log("商品列表===",r),u.value=r.data,h.value=r.total??0})},V=()=>{y.get(w.listSearch,{search:decodeURI(n.user)}).then(e=>{console.log("搜搜结果",e),u.value=e.data,h.value=e.total??0})},S=e=>{y.get(w.listDelete,{id:e,page:c}).then(t=>{console.log("列表删除",t),t.code==200?(h.value=t.total??0,u.value=t.data,f({type:"success",message:"删除成功"})):f({type:"error",message:"删除失败"})})};K(()=>{v()}),O(u,e=>{C.value=!(e.length>0)});const E=()=>{x.setStoreData(P.Add_Goods,"添加"),z.push("product-page")},T=()=>{console.log("submit!",n),V()},L=()=>{n.user||v()},U=(e,t)=>{console.log(e,t),x.setStoreData(P.Editor_Goods,"编辑",t),z.push("product-page")},$=(e,t)=>{console.log(e,t),B.confirm("确定删除信息？","删除提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{S(t.id)}).catch(()=>{f({type:"info",message:"已取消"})})},G=()=>{B.confirm("确定要删除吗？","删除提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(()=>{var e=[];k.value.forEach(r=>{e.push(r.id)});let t=e.join(",");console.log(t),S(t)}).catch(()=>{f({type:"info",message:"已取消"})})},I=e=>{console.log("表格勾选",e),k.value=e},R=e=>{console.log(`${e} items per page`)},j=e=>{console.log(`current page: ${e}`),c.value=e,v(e,n.user)};return(e,t)=>{const r=i("el-input"),b=i("el-form-item"),M=i("el-date-picker"),p=i("el-button"),N=i("el-form"),s=i("el-table-column"),A=i("el-table"),q=i("el-pagination");return Q(),W("div",null,[_("div",le,[_("div",ae,[o(N,{inline:!0,model:n,size:"small",class:"demo-form-inline"},{default:a(()=>[o(b,{label:"产品名称"},{default:a(()=>[o(r,{modelValue:n.user,"onUpdate:modelValue":t[0]||(t[0]=l=>n.user=l),onBlur:L,size:"small",placeholder:"产品名称"},null,8,["modelValue"])]),_:1}),o(b,{label:"添加时间"},{default:a(()=>[o(M,{modelValue:n.date,"onUpdate:modelValue":t[1]||(t[1]=l=>n.date=l),size:"small",type:"date",label:"添加时间",placeholder:"添加时间"},null,8,["modelValue"])]),_:1}),o(b,null,{default:a(()=>[o(p,{type:"primary",size:"small",onClick:T},{default:a(()=>[m("查询")]),_:1})]),_:1})]),_:1},8,["model"])]),_("div",ne,[o(p,{type:"warning",icon:d(Z),size:"small",onClick:E},{default:a(()=>[m("添加商品")]),_:1},8,["icon"]),o(p,{type:"danger",icon:d(D),size:"small",onClick:G},{default:a(()=>[m("批量删除")]),_:1},8,["icon"])])]),_("div",se,[o(A,{data:u.value,border:"",style:{width:"100%"},"header-row-class-name":"activeHead",onSelectionChange:I},{default:a(()=>[o(s,{align:"center",type:"selection",fixed:"",width:"60"}),o(s,{align:"center",prop:"id",label:"商品编号",width:"100"}),o(s,{align:"center",prop:"title",label:"商品名称",width:"100"}),o(s,{align:"center",prop:"price",label:"商品价格",width:"100"}),o(s,{align:"center",prop:"category",label:"商品类目",width:"100"}),o(s,{align:"center",prop:"time",label:"添加时间",width:"180"}),o(s,{align:"center",prop:"sellPoint",label:"商品卖点",width:"180","show-overflow-tooltip":""}),o(s,{align:"center",prop:"des",label:"商品描述",width:"180","show-overflow-tooltip":""}),o(s,{align:"center",label:"操作",fixed:"right",width:"180"},{default:a(l=>[o(p,{size:"small",type:"primary",icon:d(ee),onClick:H=>U(l.$index,l.row)},{default:a(()=>[m("编辑")]),_:2},1032,["icon","onClick"]),o(p,{size:"small",type:"danger",icon:d(D),onClick:H=>$(l.$index,l.row)},{default:a(()=>[m("删除")]),_:2},1032,["icon","onClick"])]),_:1})]),_:1},8,["data"])]),_("div",ie,[o(q,{"current-page":d(c),"onUpdate:currentPage":t[2]||(t[2]=l=>X(c)?c.value=l:c=l),small:"",background:"","hide-on-single-page":d(C),layout:"total, prev, pager, next, jumper",total:d(h),onSizeChange:R,onCurrentChange:j},null,8,["current-page","hide-on-single-page","total"])])])}}});const ge=te(ce,[["__scopeId","data-v-6a422cda"]]);export{ge as default};
